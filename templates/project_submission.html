 <!DOCTYPE html>
 <html lang="en">
 

 <head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>{% if project %}Edit Project{% else %}Project Submission{% endif %}</title>
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
   <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
   <style>
   body {
   font-family: 'Nunito', sans-serif;
   background-color: #f8f9fa;
   margin: 0;
   padding-bottom: 50px;
   }
 

   .container {
   background-color: #ffffff;
   border-radius: 15px;
   box-shadow: 0 0 30px rgba(0, 0, 0, 0.15);
   padding: 40px;
   margin-top: 30px;
   margin-bottom: 40px;
   width: 85%;
   max-width: 1200px;
   }
 

   h1 {
   color: #343a40;
   text-align: center;
   margin-bottom: 30px;
   font-size: 2.7em;
   font-weight: 700;
   }
 

   .form-group {
   margin-bottom: 25px;
   }
 

   label {
   font-weight: 600;
   color: #495057;
   font-size: 1.1em;
   display: block;
   margin-bottom: 7px;
   }
 

   .form-control {
   border-radius: 7px;
   border: 1.8px solid #ced4da;
   padding: 14px;
   font-size: 17px;
   line-height: 1.6;
   transition: border-color 0.2s ease;
   }
 

   .form-control:focus {
   border-color: #007bff;
   box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25);
   }
 

   textarea.form-control {
   resize: vertical;
   min-height: 140px;
   }
 

   .btn-primary {
   background-color: #007bff;
   border-color: #007bff;
   color: #fff;
   padding: 14px 28px;
   border-radius: 7px;
   font-size: 19px;
   transition: background-color 0.3s ease;
   }
 

   .btn-primary:hover {
   background-color: #0056b3;
   border-color: #0056b3;
   }
 

   .error-message {
   color: #dc3545;
   margin-top: 12px;
   font-size: 17px;
   }
 

   h2 {
   color: #343a40;
   margin-top: 35px;
   margin-bottom: 25px;
   border-bottom: 2.5px solid #dee2e6;
   padding-bottom: 12px;
   font-size: 1.9em;
   }
 

   .uploaded-media-container {
   margin-top: 25px;
   padding-top: 25px;
   border-top: 2.5px solid #dee2e6;
   display: flex;
   flex-wrap: wrap;
   gap: 18px;
   }
 

   .uploaded-image,
   .uploaded-video {
   width: 180px;
   height: auto;
   border: 1.8px solid #ced4da;
   border-radius: 10px;
   box-shadow: 0 3px 7px rgba(0, 0, 0, 0.07);
   margin-bottom: 13px;
   cursor: pointer;
   transition: transform 0.2s ease;
   }
 

   .uploaded-image:hover,
   .uploaded-video:hover {
   transform: scale(1.05);
   }
 

   .uploaded-video {
   max-height: 180px;
   }
 

   .zip-file-info {
   margin-top: 25px;
   font-size: 15px;
   color: #6c757d;
   }
 

   .delete-button,
   .delete-zip-button {
   background-color: #dc3545;
   color: white;
   border: none;
   padding: 9px 14px;
   margin-left: 10px;
   border-radius: 7px;
   cursor: pointer;
   font-size: 15px;
   transition: background-color 0.3s ease;
   }
 

   .delete-button:hover,
   .delete-zip-button:hover {
   background-color: #c82333;
   }
 

   .modal {
   display: none;
   position: fixed;
   z-index: 1000;
   padding-top: 60px;
   left: 0;
   top: 0;
   width: 100%;
   height: 100%;
   overflow: auto;
   background-color: rgba(0, 0, 0, 0.85);
   }
 

   .modal-content {
   margin: auto;
   display: block;
   max-width: 95%;
   max-height: 95%;
   border-radius: 10px;
   }
 

   .close {
   position: absolute;
   top: 20px;
   right: 40px;
   color: #f1f1f1;
   font-size: 45px;
   font-weight: bold;
   transition: color 0.3s;
   }
 

   .close:hover,
   .close:focus {
   color: #bbb;
   text-decoration: none;
   cursor: pointer;
   }
 

   .btn-secondary {
   background-color: #6c757d;
   border-color: #6c757d;
   color: #fff;
   padding: 14px 28px;
   border-radius: 7px;
   font-size: 19px;
   transition: background-color 0.3s ease;
   text-decoration: none;
   display: inline-block;
   margin-top: 20px;
   }
 

   .btn-secondary:hover {
   background-color: #5a6268;
   border-color: #545b62;
   }
   </style>
 </head>
 

 <body>
   <div class="container">
   <h1>{% if project %}Edit Project{% else %}Project Submission{% endif %}</h1>
 

   <form method="POST" enctype="multipart/form-data">
 

   <div class="form-group">
   <label for="title">Project Title:</label>
   <input type="text" class="form-control" id="title" name="title" value="{{ project.title if project }}"
   required>
   </div>
 

   <div class="form-group">
   <label for="description">Project Description:</label>
   <textarea class="form-control" id="description" name="description" rows="5"
   required>{{ project.description if project }}</textarea>
   </div>
 

   <div class="form-group">
   <label for="category">Project Category:</label>
   <input type="text" class="form-control" id="category" name="category"
   value="{{ project.category if project }}" required>
   </div>
 

   <div class="form-group">
   <label for="guide_name">Guide Name:</label>
   <input type="text" class="form-control" id="guide_name" name="guide_name"
   value="{{ project.guide_name if project }}" required>
   </div>
 

   <div class="form-group">
   <label for="github_link">GitHub Link:</label>
   <input type="text" class="form-control" id="github_link" name="github_link"
   value="{{ project.github_link if project }}">
   </div>
 

   <div class="form-group">
   <label for="drive_link">Drive Link:</label>
   <input type="text" class="form-control" id="drive_link" name="drive_link"
   value="{{ project.drive_link if project }}">
   </div>
 

   <h2>Team Members (Optional, Max 4)</h2>
 

   {% for i in range(4) %}
   <div class="form-group">
   <label for="member_name_{{ i+1 }}">Member {{ i+1 }} Name:</label>
   <input type="text" class="form-control" id="member_name_{{ i+1 }}" name="member_name_{{ i+1 }}"
   value="{{ project.team_members[i].name if project and project.team_members|length > i }}">
   </div>
   <div class="form-group">
   <label for="member_roll_no_{{ i+1 }}">Member {{ i+1 }} Roll No:</label>
   <input type="text" class="form-control" id="member_roll_no_{{ i+1 }}" name="member_roll_no_{{ i+1 }}"
   value="{{ project.team_members[i].roll_no if project and project.team_members|length > i }}">
   </div>
   {% endfor %}
 

   <div class="form-group">
   <label for="files">Upload ZIP File ({% if project %}Leave blank to keep current{% endif %}):</label>
   <input type="file" class="form-control" id="files" name="files" accept=".zip">
   {% if project and project.zip_file_id %}
   <small>Current ZIP file: {{ project.zip_file_id.split('/')[-1] }}</small>
   {% endif %}
   </div>
 

   <div class="form-group">
   <label for="screenshots">Upload Screenshots/Videos (Multiple allowed):</label>
   <input type="file" class="form-control" id="screenshots" name="screenshots" multiple
   accept="image/*,video/*">
   <small>Upload new screenshots/videos to add or replace existing ones.</small>
   </div>
 

   <button type="submit" class="btn btn-primary">{% if project %}Update Project{% else %}Submit Project{% endif
   %}</button>
 

   {% if error_message %}
   <p class="error-message">{{ error_message }}</p>
   {% endif %}
 

   </form>
 

   {% if project and project.screenshot_ids %}
   <div class="uploaded-media-container">
   <h2>Current Screenshots/Videos</h2>
   {% for filepath in project.screenshot_ids %}
   {% set filename = filepath.split('/')[-1] %}
   {% if filename.lower().endswith(('.png', '.jpg', '.jpeg', '.gif')) %}
   <img src="{{ url_for('student.get_student_upload', filename=filename) }}" alt="Screenshot"
   class="uploaded-image" onclick="openModal(this)">
   {% elif filename.lower().endswith(('.mp4', '.mov')) %}
   <video src="{{ url_for('student.get_student_upload', filename=filename) }}" controls
   class="uploaded-video"></video>
   {% else %}
   <p>Unsupported media type: {{ filename }}</p>
   {% endif %}
   <form method="POST" action="{{ url_for('student.delete_media', project_id=project._id, filename=filename) }}"
   style="display: inline;">
   <button type="submit" class="delete-button"
   onclick="return confirm('Are you sure you want to delete this file?')">Ã—</button>
   </form>
   {% endfor %}
   </div>
   {% endif %}
 

   {% if project and project.zip_file_id %}
   <div class="zip-file-info">
   <small>Current ZIP file: {{ project.zip_file_id.split('/')[-1] }}</small>
   <form method="POST" action="{{ url_for('student.delete_zip', project_id=project._id) }}"
   style="display: inline;">
   <button type="submit" class="delete-zip-button"
   onclick="return confirm('Are you sure you want to delete this ZIP file?')">Delete</button>
   </form>
   </div>
   {% endif %}
   <a href="{{ url_for('student.dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
 

 

   </div>
 

   <!-- The Modal -->
   <div id="myModal" class="modal">
   <span class="close" onclick="closeModal()">&times;</span>
   <img class="modal-content" id="img01">
   </div>
 

   <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
   <script>
   // Get the modal
   var modal = document.getElementById("myModal");
 

   // Function to open the modal
   function openModal(img) {
   modal.style.display = "block";
   var modalImg = document.getElementById("img01");
   modalImg.src = img.src;
   }
 

   // Function to close the modal
   function closeModal() {
   modal.style.display = "none";
   }
   </script>
 </body>
 

 </html>
