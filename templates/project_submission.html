 <!DOCTYPE html>
 <html lang="en">
 

 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if project %}Edit Project{% else %}Project Submission{% endif %}</title>
    <style>
    body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f7f7f7;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    }
 

    .container {
    background-color: #fff;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    width: 90%;
    max-width: 900px;
    margin: 20px;
    }
 

    h1 {
    text-align: center;
    color: #2d3e50;
    margin-bottom: 30px;
    }
 

    form label {
    display: block;
    margin-top: 15px;
    font-weight: 500;
    color: #34495e;
    }
 

    form input[type="text"],
    form textarea {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    margin-bottom: 20px;
    border: 1px solid #bdc3c7;
    border-radius: 6px;
    box-sizing: border-box;
    font-size: 16px;
    color: #34495e;
    transition: border-color 0.3s ease;
    }
 

    form input[type="text"]:focus,
    form textarea:focus {
    border-color: #3498db;
    outline: none;
    }
 

    form textarea {
    resize: vertical;
    }
 

    form input[type="file"] {
    margin-top: 10px;
    margin-bottom: 20px;
    color: #34495e;
    }
 

    button[type="submit"] {
    background-color: #3498db;
    color: white;
    padding: 14px 25px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 18px;
    font-weight: 600;
    transition: background-color 0.3s ease;
    }
 

    button[type="submit"]:hover {
    background-color: #2980b9;
    }
 

    .form-group {
    margin-bottom: 25px;
    }
 

    .error-message {
    color: #e74c3c;
    margin-top: 10px;
    font-size: 16px;
    }
 

    h2 {
    color: #2d3e50;
    margin-top: 30px;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid #ecf0f1;
    }
 

    .uploaded-media-container {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 2px solid #ecf0f1;
    display: flex;
    flex-wrap: wrap;
    gap: 25px; /* Increased gap for better spacing */
    }
 

    .uploaded-image,
    .uploaded-video {
    width: 250px; /* Increased width */
    height: auto;
    border: 1px solid #bdc3c7;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    margin-bottom: 15px; /* Add margin to the bottom */
    cursor: pointer; /* Change cursor to pointer */
    }
 

    .uploaded-video {
    max-height: 200px; /* Increased max-height */
    }
 

    .zip-file-info {
    margin-top: 20px;
    font-size: 14px;
    color: #7f8c8d;
    }
 

    /* Style for the delete button */
    .delete-button, .delete-zip-button {
    background-color: #e74c3c;
    color: white;
    border: none;
    padding: 8px 12px;
    margin-left: 10px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s ease;
    }
 

    .delete-button:hover, .delete-zip-button:hover {
    background-color: #c0392b;
    }
 

    /* The Modal (background) */
    .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 50px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgba(0, 0, 0, 0.8); /* Black w/ opacity */
    }
 

    /* Modal Content (image) */
    .modal-content {
    margin: auto;
    display: block;
    max-width: 80%;
    max-height: 80%;
    }
 

    /* The Close Button */
    .close {
    position: absolute;
    top: 15px;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    }
 

    .close:hover,
    .close:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
    }
    </style>
 </head>
 

 <body>
    <div class="container">
    <h1>{% if project %}Edit Project{% else %}Project Submission{% endif %}</h1>
 

    <form method="POST" enctype="multipart/form-data">
 

    <div class="form-group">
    <label for="title">Project Title:</label>
    <input type="text" id="title" name="title" value="{{ project.title if project }}" required>
    </div>
 

    <div class="form-group">
    <label for="description">Project Description:</label>
    <textarea id="description" name="description" rows="4" required>{{ project.description if project }}</textarea>
    </div>
 

    <div class="form-group">
    <label for="category">Project Category:</label>
    <input type="text" id="category" name="category" value="{{ project.category if project }}" required>
    </div>
 

    <div class="form-group">
    <label for="guide_name">Guide Name:</label>
    <input type="text" id="guide_name" name="guide_name" value="{{ project.guide_name if project }}" required>
    </div>
 

    <div class="form-group">
    <label for="github_link">GitHub Link:</label>
    <input type="text" id="github_link" name="github_link" value="{{ project.github_link if project }}">
    </div>
 

    <div class="form-group">
    <label for="drive_link">Drive Link:</label>
    <input type="text" id="drive_link" name="drive_link" value="{{ project.drive_link if project }}">
    </div>
 

    <h2>Team Members (Optional, Max 4)</h2>
 

    {% for i in range(4) %}
    <div class="form-group">
    <label for="member_name_{{ i+1 }}">Member {{ i+1 }} Name:</label>
    <input type="text" id="member_name_{{ i+1 }}" name="member_name_{{ i+1 }}" value="{{ project.team_members[i].name if project and project.team_members|length > i }}">
    </div>
    <div class="form-group">
    <label for="member_roll_no_{{ i+1 }}">Member {{ i+1 }} Roll No:</label>
    <input type="text" id="member_roll_no_{{ i+1 }}" name="member_roll_no_{{ i+1 }}" value="{{ project.team_members[i].roll_no if project and project.team_members|length > i }}">
    </div>
    {% endfor %}
 

    <div class="form-group">
    <label for="files">Upload ZIP File ({% if project %}Leave blank to keep current{% endif %}):</label>
    <input type="file" id="files" name="files" accept=".zip">
    {% if project and project.zip_file_id %}
    <small>Current ZIP file: {{ project.zip_file_id.split('/')[-1] }}</small>
    {% endif %}
    </div>
 

    <div class="form-group">
    <label for="screenshots">Upload Screenshots/Videos (Multiple allowed):</label>
    <input type="file" id="screenshots" name="screenshots" multiple accept="image/*,video/*">
    <small>Upload new screenshots/videos to add or replace existing ones.</small>
    </div>
 

    <button type="submit">{% if project %}Update Project{% else %}Submit Project{% endif %}</button>
 

    {% if error_message %}
    <p class="error-message">{{ error_message }}</p>
    {% endif %}
    </form>
 

    {% if project and project.screenshot_ids %}
    <div class="uploaded-media-container">
    <h2>Current Screenshots/Videos</h2>
    {% for filepath in project.screenshot_ids %}
    {% set filename = filepath.split('/')[-1] %}
    {% if filename.lower().endswith(('.png', '.jpg', '.jpeg', '.gif')) %}
    <img src="{{ url_for('student.get_student_upload', filename=filename) }}" alt="Screenshot" class="uploaded-image"
    onclick="openModal(this)">
    {% elif filename.lower().endswith(('.mp4', '.mov')) %}
    <video src="{{ url_for('student.get_student_upload', filename=filename) }}" controls class="uploaded-video"></video>
    {% else %}
    <p>Unsupported media type: {{ filename }}</p>
    {% endif %}
    <form method="POST" action="{{ url_for('student.delete_media', project_id=project._id, filename=filename) }}"
    style="display: inline;">
    <button type="submit" class="delete-button"
    onclick="return confirm('Are you sure you want to delete this file?')">Ã—</button>
    </form>
    {% endfor %}
    </div>
    {% endif %}
 

    {% if project and project.zip_file_id %}
    <div class="zip-file-info">
    <small>Current ZIP file: {{ project.zip_file_id.split('/')[-1] }}</small>
    <form method="POST" action="{{ url_for('student.delete_zip', project_id=project._id) }}"
    style="display: inline;">
    <button type="submit" class="delete-zip-button"
    onclick="return confirm('Are you sure you want to delete this ZIP file?')">Delete</button>
    </form>
    </div>
    {% endif %}
 

    </div>
 

    <!-- The Modal -->
    <div id="myModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <img class="modal-content" id="img01">
    </div>
 

    <script>
    // Get the modal
    var modal = document.getElementById("myModal");
 

    // Function to open the modal
    function openModal(img) {
    modal.style.display = "block";
    var modalImg = document.getElementById("img01");
    modalImg.src = img.src;
    }
 

    // Function to close the modal
    function closeModal() {
    modal.style.display = "none";
    }
    </script>
 </body>
 

 </html>